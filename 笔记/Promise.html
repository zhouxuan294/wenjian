<html>
<head>
  <title>Promise</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600240 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="maxiang"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="850"/>
<h1>Promise</h1>

<div><span lang="v2" style="color: #2c3f51; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; line-height: 1.6; background: none;"><del style="position:relative;display:block;z-index:10;"><a href="http://maxiang.io/#/?provider=evernote&amp;guid=553548d9-e672-463e-a3f7-69f20612ceeb&amp;notebook=%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%AC%94%E8%AE%B0%E6%9C%AC" style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;">Edit</a></del><div style="color: #2c3f51; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; line-height: 1.6;">
                        
                    

<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; font-size: 34.4px; margin: 1.2em 0 .6em 0; text-align: start;">Promise</h2>

<ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;"><li style="line-height: 1.6;">Promise是原生JS的一个类，为了解决JS中的异步问题</li>
<li style="line-height: 1.6;">Promise接收一个参数，这个参数是一个回调函数 <br/>
<ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;">
<li style="line-height: 1.6;">这个回调函数接收两个参数： <br/>
<ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;">
<li style="line-height: 1.6;">第一个参数是用来异步执行成功之后执行的回调函数</li>
<li style="line-height: 1.6;">第二个参数是用来异步执行失败之后执行的回调函数</li>
<li style="line-height: 1.6;">以上两个回调函数只能执行其中一个，其中一个执行了，另一个就不执行</li></ul></li></ul></li>
<li style="line-height: 1.6;">Promise的实例有三种状态： <br/>
<ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;">
<li style="line-height: 1.6;">pending → 实例创建完成时就是pending</li>
<li style="line-height: 1.6;">resolved → resolve执行完之后就是resolved</li>
<li style="line-height: 1.6;">rejected → reject执行完之后就是rejected</li></ul></li>
<li style="line-height: 1.6;">then是Promise原型上的函数，它接收两个函数作为参数： <br/>
<ul style="margin-top: 0; margin-bottom: 1.1em; line-height: 1.6;">
<li style="line-height: 1.6;">第一个函数是个成功的回调</li>
<li style="line-height: 1.6;">第二个函数是个失败的回调</li>
<li style="line-height: 1.6;">then返回的是一个新的Promise实例，该实例的then接收的参数是上一个then return的参数；无论是上一个then的成功函数还是失败函数，只要执行了，新实例的then的成功函数就会执行，反之，新实例的then的失败函数执行</li></ul></li>
</ul>



<pre style="word-wrap: break-word; font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; font-size: .9em; background: #f6f6f6; word-break: break-all; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; position: relative;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #f8f8f2; display: block; overflow-x: auto; background: #23241f; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">var</span> p=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Promise</span>(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">resolve,reject</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    resolve(<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'success'</span>);①
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>    reject(<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'fail'</span>);②
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>    <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//①和②只能执行其中一个，根据执行的先后顺序，一个执行，另一个就不执行</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>});
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>p.then(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">data</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>    <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">console</span>.log(data);③<span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//若①执行，此处的“data”就是“success”</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>},(res)=&gt;{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>    <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">console</span>.log(res);④<span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//若②执行，此处的“res”就是“fail”</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>});
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">var</span> p2=p.then(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">data</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>    <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">console</span>.log(data);⑤<span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//同③处</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> data;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>},(res)=&gt;{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>    <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">console</span>.log(res);⑥<span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//同④处</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">16.</span>    <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> res;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">17.</span>});
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">18.</span>p2.then(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">data</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">19.</span>    <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">console</span>.log(data);⑦<span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//无论至⑤执行还是⑥执行，都会执行此处；若⑤执行且return了data，则此处的“data”就是“success”，若⑥执行且return了res，则此处的“data”就是“fail”，若没有return，则此处的“data”就是“undefined”</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">20.</span>},(res)=&gt;{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">21.</span>    <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">console</span>.log(res);⑧
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">22.</span>})
</div></code></pre>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">Promise.all</code></strong></p>



<pre style="word-wrap: break-word; font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; font-size: .9em; background: #f6f6f6; word-break: break-all; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; position: relative;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #f8f8f2; display: block; overflow-x: auto; background: #23241f; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> p1=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Promise</span>(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">resolve,reject</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>    resolve(<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'success-1'</span>);①
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>    reject(<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'fail-1'</span>);②
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>});
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> p2=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Promise</span>(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">resolve,reject</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>    resolve(<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'success-2'</span>);③
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>    reject(<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'fail-2'</span>);④
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>});
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span><span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Promise</span>.all([p1,p2]).then(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">res</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>    <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">console</span>.log(res);⑤<span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//只有当①和③都执行的时候，此处才会执行，输出的是一个数组：[success-1,success-2]</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>}).catch(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">e</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>    <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">console</span>.log(e);⑥<span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//②和④中，只要其中一个执行了，此处就会执行，当两者都执行时，此处输出“fail-1”，当②和③执行时，此处输出“fail-1”，当①和④执行时，此处输出“fail-2”</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>})
</div></code></pre>

<p style="margin: 0 0 1.1em; line-height: 1.6;"><strong style="font-weight: bold; line-height: 1.6;"><code style="font-family: 'Source Code Pro',Consolas,monospace; font-size: .9em; padding: 2px 4px; color: #c7254e; background-color: #f9f2f4; white-space: normal; border-radius: 4px;">Promise.race</code></strong></p>



<pre style="word-wrap: break-word; font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; font-size: .9em; background: #f6f6f6; word-break: break-all; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; position: relative;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #f8f8f2; display: block; overflow-x: auto; background: #23241f; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//只要①或者②执行了，③和④就不执行</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> p1=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Promise</span>(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">resolve,reject</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>    resolve(<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'success-1'</span>);①
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>    reject(<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'fail-1'</span>);②
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>});
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span><span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">let</span> p2=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">new</span> <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Promise</span>(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">resolve,reject</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>    resolve(<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'success-2'</span>);③
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>    reject(<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'fail-2'</span>);④
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>});
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span><span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">Promise</span>.race(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">res</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>    <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">console</span>.log(res);⑤<span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//当①执行的时候，此处输出“success-1”；当①和②不执行，③执行的时候，此处输出“success-2”</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>}).catch(<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">e</span>)=&gt;</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>    <span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">console</span>.log(e);⑥<span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//当②执行的时候，此处输出“fail-1”；当①和②不执行，④执行的时候，此处输出“fail-2”</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>});
</div></code></pre></div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%23Promise%0A-%20Promise%u662F%u539F%u751FJS%u7684%u4E00%u4E2A%u7C7B%uFF0C%u4E3A%u4E86%u89E3%u51B3JS%u4E2D%u7684%u5F02%u6B65%u95EE%u9898%0A-%20Promise%u63A5%u6536%u4E00%u4E2A%u53C2%u6570%uFF0C%u8FD9%u4E2A%u53C2%u6570%u662F%u4E00%u4E2A%u56DE%u8C03%u51FD%u6570%0A%20%20%20-%20%u8FD9%u4E2A%u56DE%u8C03%u51FD%u6570%u63A5%u6536%u4E24%u4E2A%u53C2%u6570%uFF1A%0A%20%20%20%20%20%20-%20%u7B2C%u4E00%u4E2A%u53C2%u6570%u662F%u7528%u6765%u5F02%u6B65%u6267%u884C%u6210%u529F%u4E4B%u540E%u6267%u884C%u7684%u56DE%u8C03%u51FD%u6570%0A%20%20%20%20%20%20-%20%u7B2C%u4E8C%u4E2A%u53C2%u6570%u662F%u7528%u6765%u5F02%u6B65%u6267%u884C%u5931%u8D25%u4E4B%u540E%u6267%u884C%u7684%u56DE%u8C03%u51FD%u6570%0A%20%20%20%20%20%20-%20%u4EE5%u4E0A%u4E24%u4E2A%u56DE%u8C03%u51FD%u6570%u53EA%u80FD%u6267%u884C%u5176%u4E2D%u4E00%u4E2A%uFF0C%u5176%u4E2D%u4E00%u4E2A%u6267%u884C%u4E86%uFF0C%u53E6%u4E00%u4E2A%u5C31%u4E0D%u6267%u884C%0A-%20Promise%u7684%u5B9E%u4F8B%u6709%u4E09%u79CD%u72B6%u6001%uFF1A%0A%20%20%20-%20pending%20%u2192%20%u5B9E%u4F8B%u521B%u5EFA%u5B8C%u6210%u65F6%u5C31%u662Fpending%0A%20%20%20-%20resolved%20%u2192%20resolve%u6267%u884C%u5B8C%u4E4B%u540E%u5C31%u662Fresolved%0A%20%20%20-%20rejected%20%u2192%20reject%u6267%u884C%u5B8C%u4E4B%u540E%u5C31%u662Frejected%0A-%20then%u662FPromise%u539F%u578B%u4E0A%u7684%u51FD%u6570%uFF0C%u5B83%u63A5%u6536%u4E24%u4E2A%u51FD%u6570%u4F5C%u4E3A%u53C2%u6570%uFF1A%0A%20%20%20-%20%u7B2C%u4E00%u4E2A%u51FD%u6570%u662F%u4E2A%u6210%u529F%u7684%u56DE%u8C03%0A%20%20%20-%20%u7B2C%u4E8C%u4E2A%u51FD%u6570%u662F%u4E2A%u5931%u8D25%u7684%u56DE%u8C03%0A%20%20%20-%20then%u8FD4%u56DE%u7684%u662F%u4E00%u4E2A%u65B0%u7684Promise%u5B9E%u4F8B%uFF0C%u8BE5%u5B9E%u4F8B%u7684then%u63A5%u6536%u7684%u53C2%u6570%u662F%u4E0A%u4E00%u4E2Athen%20return%u7684%u53C2%u6570%uFF1B%u65E0%u8BBA%u662F%u4E0A%u4E00%u4E2Athen%u7684%u6210%u529F%u51FD%u6570%u8FD8%u662F%u5931%u8D25%u51FD%u6570%uFF0C%u53EA%u8981%u6267%u884C%u4E86%uFF0C%u65B0%u5B9E%u4F8B%u7684then%u7684%u6210%u529F%u51FD%u6570%u5C31%u4F1A%u6267%u884C%uFF0C%u53CD%u4E4B%uFF0C%u65B0%u5B9E%u4F8B%u7684then%u7684%u5931%u8D25%u51FD%u6570%u6267%u884C%0A%0A%60%60%60javascript%0Avar%20p%3Dnew%20Promise%28%28resolve%2Creject%29%3D%3E%7B%0A%09resolve%28%27success%27%29%3B%u2460%0A%09reject%28%27fail%27%29%3B%u2461%0A%09//%u2460%u548C%u2461%u53EA%u80FD%u6267%u884C%u5176%u4E2D%u4E00%u4E2A%uFF0C%u6839%u636E%u6267%u884C%u7684%u5148%u540E%u987A%u5E8F%uFF0C%u4E00%u4E2A%u6267%u884C%uFF0C%u53E6%u4E00%u4E2A%u5C31%u4E0D%u6267%u884C%0A%7D%29%3B%0Ap.then%28%28data%29%3D%3E%7B%0A%09console.log%28data%29%3B%u2462//%u82E5%u2460%u6267%u884C%uFF0C%u6B64%u5904%u7684%u201Cdata%u201D%u5C31%u662F%u201Csuccess%u201D%0A%7D%2C%28res%29%3D%3E%7B%0A%09console.log%28res%29%3B%u2463//%u82E5%u2461%u6267%u884C%uFF0C%u6B64%u5904%u7684%u201Cres%u201D%u5C31%u662F%u201Cfail%u201D%0A%7D%29%3B%0Avar%20p2%3Dp.then%28%28data%29%3D%3E%7B%0A%09console.log%28data%29%3B%u2464//%u540C%u2462%u5904%0A%09return%20data%3B%0A%7D%2C%28res%29%3D%3E%7B%0A%09console.log%28res%29%3B%u2465//%u540C%u2463%u5904%0A%09return%20res%3B%0A%7D%29%3B%0Ap2.then%28%28data%29%3D%3E%7B%0A%09console.log%28data%29%3B%u2466//%u65E0%u8BBA%u81F3%u2464%u6267%u884C%u8FD8%u662F%u2465%u6267%u884C%uFF0C%u90FD%u4F1A%u6267%u884C%u6B64%u5904%uFF1B%u82E5%u2464%u6267%u884C%u4E14return%u4E86data%uFF0C%u5219%u6B64%u5904%u7684%u201Cdata%u201D%u5C31%u662F%u201Csuccess%u201D%uFF0C%u82E5%u2465%u6267%u884C%u4E14return%u4E86res%uFF0C%u5219%u6B64%u5904%u7684%u201Cdata%u201D%u5C31%u662F%u201Cfail%u201D%uFF0C%u82E5%u6CA1%u6709return%uFF0C%u5219%u6B64%u5904%u7684%u201Cdata%u201D%u5C31%u662F%u201Cundefined%u201D%0A%7D%2C%28res%29%3D%3E%7B%0A%09console.log%28res%29%3B%u2467%0A%7D%29%0A%60%60%60%0A**%60Promise.all%60**%0A%60%60%60javascript%0Alet%20p1%3Dnew%20Promise%28%28resolve%2Creject%29%3D%3E%7B%0A%09resolve%28%27success-1%27%29%3B%u2460%0A%09reject%28%27fail-1%27%29%3B%u2461%0A%7D%29%3B%0Alet%20p2%3Dnew%20Promise%28%28resolve%2Creject%29%3D%3E%7B%0A%09resolve%28%27success-2%27%29%3B%u2462%0A%09reject%28%27fail-2%27%29%3B%u2463%0A%7D%29%3B%0APromise.all%28%5Bp1%2Cp2%5D%29.then%28%28res%29%3D%3E%7B%0A%09console.log%28res%29%3B%u2464//%u53EA%u6709%u5F53%u2460%u548C%u2462%u90FD%u6267%u884C%u7684%u65F6%u5019%uFF0C%u6B64%u5904%u624D%u4F1A%u6267%u884C%uFF0C%u8F93%u51FA%u7684%u662F%u4E00%u4E2A%u6570%u7EC4%uFF1A%5Bsuccess-1%2Csuccess-2%5D%0A%7D%29.catch%28%28e%29%3D%3E%7B%0A%09console.log%28e%29%3B%u2465//%u2461%u548C%u2463%u4E2D%uFF0C%u53EA%u8981%u5176%u4E2D%u4E00%u4E2A%u6267%u884C%u4E86%uFF0C%u6B64%u5904%u5C31%u4F1A%u6267%u884C%uFF0C%u5F53%u4E24%u8005%u90FD%u6267%u884C%u65F6%uFF0C%u6B64%u5904%u8F93%u51FA%u201Cfail-1%u201D%uFF0C%u5F53%u2461%u548C%u2462%u6267%u884C%u65F6%uFF0C%u6B64%u5904%u8F93%u51FA%u201Cfail-1%u201D%uFF0C%u5F53%u2460%u548C%u2463%u6267%u884C%u65F6%uFF0C%u6B64%u5904%u8F93%u51FA%u201Cfail-2%u201D%0A%7D%29%0A%60%60%60%0A**%60Promise.race%60**%0A%60%60%60javascript%0A//%u53EA%u8981%u2460%u6216%u8005%u2461%u6267%u884C%u4E86%uFF0C%u2462%u548C%u2463%u5C31%u4E0D%u6267%u884C%0Alet%20p1%3Dnew%20Promise%28%28resolve%2Creject%29%3D%3E%7B%0A%09resolve%28%27success-1%27%29%3B%u2460%0A%09reject%28%27fail-1%27%29%3B%u2461%0A%7D%29%3B%0Alet%20p2%3Dnew%20Promise%28%28resolve%2Creject%29%3D%3E%7B%0A%09resolve%28%27success-2%27%29%3B%u2462%0A%09reject%28%27fail-2%27%29%3B%u2463%0A%7D%29%3B%0APromise.race%28%28res%29%3D%3E%7B%0A%09console.log%28res%29%3B%u2464//%u5F53%u2460%u6267%u884C%u7684%u65F6%u5019%uFF0C%u6B64%u5904%u8F93%u51FA%u201Csuccess-1%u201D%uFF1B%u5F53%u2460%u548C%u2461%u4E0D%u6267%u884C%uFF0C%u2462%u6267%u884C%u7684%u65F6%u5019%uFF0C%u6B64%u5904%u8F93%u51FA%u201Csuccess-2%u201D%0A%7D%29.catch%28%28e%29%3D%3E%7B%0A%09console.log%28e%29%3B%u2465//%u5F53%u2461%u6267%u884C%u7684%u65F6%u5019%uFF0C%u6B64%u5904%u8F93%u51FA%u201Cfail-1%u201D%uFF1B%u5F53%u2460%u548C%u2461%u4E0D%u6267%u884C%uFF0C%u2463%u6267%u884C%u7684%u65F6%u5019%uFF0C%u6B64%u5904%u8F93%u51FA%u201Cfail-2%u201D%0A%7D%29%3B%0A%60%60%60</center><br/></span>
</div></body></html> 