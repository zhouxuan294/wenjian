<html>
<head>
  <title>执行一次捕获全部当前正则匹配到的内容</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600240 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="maxiang"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="752"/>
<h1>执行一次捕获全部当前正则匹配到的内容</h1>

<div><span lang="v2" style="color: #2c3f51; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; line-height: 1.6; background: none;"><del style="position:relative;display:block;z-index:10;"><a href="http://maxiang.io/#/?provider=evernote&amp;guid=2b35681c-2ca0-4416-be89-f5f426d29876&amp;notebook=%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%AC%94%E8%AE%B0%E6%9C%AC" style="position: absolute;color: #FFF;text-decoration: none;font-size: 12px;height: 25px;border-radius: 0;margin-top: -20px;right: 15px;background: rgba(0, 0, 0, 0);border-left: 10px solid #BB3A34;border-right: 10px solid #BB3A34;border-bottom: 5px solid rgba(0, 0, 0, 0);width: 0;text-indent:-100000px;">Edit</a></del><div style="color: #2c3f51; font-family: 'Helvetica Neue', Arial, 'Hiragino Sans GB', STHeiti, 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, Song, sans-serif; line-height: 1.6;">
                        
                    



<h1 style="font-size: 41.6px; margin: 1.2em 0 .6em 0; font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 21px; margin-bottom: 10.5px; text-align: start;">执行一次捕获全部当前正则匹配到的内容</h1>



<pre style="word-wrap: break-word; font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; font-size: .9em; background: #f6f6f6; word-break: break-all; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; position: relative;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #f8f8f2; display: block; overflow-x: auto; background: #23241f; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">RegExp</span>.prototype.myExecAll=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #66d9ef; background-color: transparent;">function</span>(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;"></span>)</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>   <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//this：当前需要处理的正则</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>   <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//str ：当前要处理的字符串</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">var</span> str=<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">arguments</span>[<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>]||<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">''</span>;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">var</span> result=[];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>   <span style="display: inline; line-height: 1.6; color: #75715e; background-color: transparent;">//首先要判断this是否添加了全局修饰符g，如果没有添加，为了防止出现死循环，我们让其执行一次exec就可以了，然后把执行一次的结果直接返回</span>
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">if</span>(!<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">this</span>.global){
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>      <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">this</span>.exec(str);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>   }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">var</span> ary=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">this</span>.exec(str);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">while</span>(ary){
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>      result.push(ary[<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>]);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>      ary=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">this</span>.exec(str);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>   }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> result;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">16.</span>}
</div></code></pre>

<blockquote style="padding: 15px 20px; margin: 0 0 1.1em; border-left: 5px solid rgba(102,128,153,0.075); border-left-width: 10px; background-color: rgba(102,128,153,0.05); border-top-right-radius: 5px; border-bottom-right-radius: 5px;">
  <p style="margin: 0 0 1.1em; font-size: 1em; font-weight: 300; margin-bottom: 0; line-height: 1.6;">或者</p>
</blockquote>

<pre style="word-wrap: break-word; font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; display: block; background-color: rgba(102,128,153,0.05); color: #333; font-size: .9em; background: #f6f6f6; word-break: break-all; line-height: 1.6; margin: 0 0 1.1em; padding: 0; border: 0; border-radius: 5px; text-align: start; position: relative;"><code style="font-family: 'Source Code Pro',Consolas,monospace; white-space: pre-wrap; border-radius: 0; font-size: inherit; background-color: transparent; color: #f8f8f2; display: block; overflow-x: auto; background: #23241f; padding: 1.3em 2em; padding-left: 3.3em;"><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">1.</span><span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">RegExp</span>.prototype.execAll=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;"><span style="display: inline; line-height: 1.6; color: #66d9ef; background-color: transparent;">function</span>(<span style="display: inline; line-height: 1.6; color: #f8f8f2; background-color: transparent;">str</span>)</span>{
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">2.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">var</span> temp=<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">null</span>;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">3.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">if</span>(!<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">this</span>.global){
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">4.</span>      temp=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">this</span>.exec(str)||[];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">5.</span>      temp.errorMessage=<span style="display: inline; line-height: 1.6; color: #e6db74; background-color: transparent;">'缺少全局修饰符'</span>;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">6.</span>      <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> temp;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">7.</span>   }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">8.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">var</span> ary=[];
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">9.</span>   temp=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">this</span>.exec(str);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">10.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">while</span>(temp){
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">11.</span>      ary.push(temp[<span style="display: inline; line-height: 1.6; color: #ae81ff; background-color: transparent;">0</span>]);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">12.</span>      temp=<span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">this</span>.exec(str);
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">13.</span>   }
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">14.</span>   <span style="display: inline; line-height: 1.6; color: #f92672; background-color: transparent;">return</span> ary;
</div><div style="min-height: 1.5em; color: inherit; line-height: 1.6; background-color: transparent;"><span style="line-height: 1.6; color: #75715e; min-width: 2.2em; display: inline-block; text-align: right; opacity: .8; position: absolute; left: .3em; background-color: transparent;">15.</span>}
</div></code></pre></div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%u6267%u884C%u4E00%u6B21%u6355%u83B7%u5168%u90E8%u5F53%u524D%u6B63%u5219%u5339%u914D%u5230%u7684%u5185%u5BB9%0A%60%60%60javascript%0ARegExp.prototype.myExecAll%3Dfunction%28%29%7B%0A%20%20%20//this%uFF1A%u5F53%u524D%u9700%u8981%u5904%u7406%u7684%u6B63%u5219%0A%20%20%20//str%20%uFF1A%u5F53%u524D%u8981%u5904%u7406%u7684%u5B57%u7B26%u4E32%0A%20%20%20var%20str%3Darguments%5B0%5D%7C%7C%27%27%3B%0A%20%20%20var%20result%3D%5B%5D%3B%0A%20%20%20//%u9996%u5148%u8981%u5224%u65ADthis%u662F%u5426%u6DFB%u52A0%u4E86%u5168%u5C40%u4FEE%u9970%u7B26g%uFF0C%u5982%u679C%u6CA1%u6709%u6DFB%u52A0%uFF0C%u4E3A%u4E86%u9632%u6B62%u51FA%u73B0%u6B7B%u5FAA%u73AF%uFF0C%u6211%u4EEC%u8BA9%u5176%u6267%u884C%u4E00%u6B21exec%u5C31%u53EF%u4EE5%u4E86%uFF0C%u7136%u540E%u628A%u6267%u884C%u4E00%u6B21%u7684%u7ED3%u679C%u76F4%u63A5%u8FD4%u56DE%0A%20%20%20if%28%21this.global%29%7B%0A%20%20%20%20%20%20return%20this.exec%28str%29%3B%0A%20%20%20%7D%0A%20%20%20var%20ary%3Dthis.exec%28str%29%3B%0A%20%20%20while%28ary%29%7B%0A%20%20%20%20%20%20result.push%28ary%5B0%5D%29%3B%0A%20%20%20%20%20%20ary%3Dthis.exec%28str%29%3B%0A%20%20%20%7D%0A%20%20%20return%20result%3B%0A%7D%0A%60%60%60%0A%3E%20%u6216%u8005%0A%60%60%60javascript%0ARegExp.prototype.execAll%3Dfunction%28str%29%7B%0A%20%20%20var%20temp%3Dnull%3B%0A%20%20%20if%28%21this.global%29%7B%0A%20%20%20%20%20%20temp%3Dthis.exec%28str%29%7C%7C%5B%5D%3B%0A%20%20%20%20%20%20temp.errorMessage%3D%27%u7F3A%u5C11%u5168%u5C40%u4FEE%u9970%u7B26%27%3B%0A%20%20%20%20%20%20return%20temp%3B%0A%20%20%20%7D%0A%20%20%20var%20ary%3D%5B%5D%3B%0A%20%20%20temp%3Dthis.exec%28str%29%3B%0A%20%20%20while%28temp%29%7B%0A%20%20%20%20%20%20ary.push%28temp%5B0%5D%29%3B%0A%20%20%20%20%20%20temp%3Dthis.exec%28str%29%3B%0A%20%20%20%7D%0A%20%20%20return%20ary%3B%0A%7D%0A%60%60%60</center><br/></span>
</div></body></html> 